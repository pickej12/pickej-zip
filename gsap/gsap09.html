<!DOCTYPE html>
<html lang="ko">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GSAP_메뉴 이동 효과</title>

<link rel="stylesheet" href="./assets/css/common.css">
<link rel="stylesheet" href="./assets/css/__cont2.css">

<!-- Font  -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

<!-- GSAP -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollToPlugin.min.js"></script>

<script src="../src/jquery-1.12.4.min.js"></script>

<!-- gsap09 CSS -->
<style>
    /* 효과 nav */
    #parallax__nav {
        position: fixed;
        right: 20px;
        top: 20px;
        z-index: 1000;
        background: rgba(0,0,0,0.4);
        padding: 15px 20px;
        border-radius: 50px;
    }
    #parallax__nav li {
        list-style: none;
        display: inline;
    }
    #parallax__nav li a {
        display: inline-block;
        width: 30px; 
        height: 30px;
        padding: 5px;
        text-align: center;
        line-height: 30px;
    }
    #parallax__nav li a.active {
        background: #fff;
        color: #000;
        border-radius: 50%;
    }
</style>
</head>
<body>
    <header class="main_visual">
        <h1>GSAP Parallax Effect</h1>
        <p>GSAP scrollTrigger Effect</p>

        <div class="ul_wrap">
            <ul>
                <li class=""><a href="gsap01.html">01_기본Ani</a></li>
                <li class=""><a href="gsap02.html">02_Pin Ani</a></li>
                <li class=""><a href="gsap03.html">03_Pin 배경 고정</a></li>
            </ul>
            <ul>
                <li class=""><a href="gsap04.html">04_이질감 효과</a></li>
                <li class=""><a href="gsap05.html">05_나타내기 효과</a></li>
                <li class=""><a href="gsap06.html">06_텍스트 효과</a></li>
            </ul>
            <ul>
                <li class=""><a href="gsap07.html">07_배경색 효과</a></li>
                <li class=""><a href="gsap08.html">08_진행바 효과</a></li>
                <li class="active"><a href="#!">09_메뉴 이동 효과</a></li>
            </ul>
            <ul>
                <li class=""><a href="gsap10.html">10_메뉴 축소 효과</a></li>
                <li class=""><a href="gsap11.html">11_메뉴 숨기기 효과</a></li>
                <li class=""><a href="gsap12.html">12_가로 효과</a></li>
            </ul>
            <ul>
                <li class=""><a href="gsap13.html">13_가로/세로 효과</a></li>
                <li class=""><a href="gsap14.html">14_가로/세로 나타나기 효과</a></li>
                <li class=""><a href="gsap15.html">15_스무스 효과</a></li>
            </ul>
        </div>
    </header>

    <nav id="parallax__nav">
        <ul>
            <li><a href="#section01" class="active">s1</a></li>
            <li><a href="#section02">s2</a></li>
            <li><a href="#section03">s3</a></li>
            <li><a href="#section04">s4</a></li>
            <li><a href="#section05">s5</a></li>
            <li><a href="#section06">s6</a></li>
            <li><a href="#section07">s7</a></li>
            <li><a href="#section08">s8</a></li>
            <li><a href="#section09">s9</a></li>
        </ul>
    </nav>
    <!-- //parallax__nav -->

    <main id="parallax__cont">
        <section id="section01" class="parallax__item">
            <span class="parallax__item__num">01</span>
            <h2 class="parallax__item__title">section01</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section1 -->

        <section id="section02" class="parallax__item">
            <span class="parallax__item__num">02</span>
            <h2 class="parallax__item__title">section02</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section2 -->

        <section id="section03" class="parallax__item">
            <span class="parallax__item__num">03</span>
            <h2 class="parallax__item__title">section03</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section3 -->

        <section id="section04" class="parallax__item">
            <span class="parallax__item__num">04</span>
            <h2 class="parallax__item__title">section04</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section4 -->

        <section id="section05" class="parallax__item">
            <span class="parallax__item__num">05</span>
            <h2 class="parallax__item__title">section05</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section5 -->

        <section id="section06" class="parallax__item">
            <span class="parallax__item__num">06</span>
            <h2 class="parallax__item__title">section06</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section6 -->

        <section id="section07" class="parallax__item">
            <span class="parallax__item__num">07</span>
            <h2 class="parallax__item__title">section07</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section7 -->

        <section id="section08" class="parallax__item">
            <span class="parallax__item__num">08</span>
            <h2 class="parallax__item__title">section08</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section8 -->

        <section id="section09" class="parallax__item">
            <span class="parallax__item__num">09</span>
            <h2 class="parallax__item__title">section09</h2>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section9 -->
    </main>
    
    <script>
        // **scrollTrigger | ScrollToPlugin**
        // javascript가 더 편하지만 gsap으로 방법도 존재.

        let links = gsap.utils.toArray('#parallax__nav ul li a'); //9개의 각 요소를 links 변수에 저장하기 위해 gsap.utils.toArray 사용

        links.forEach(link => { // 각 링크마다 forEach
            let element=document.querySelector(link.getAttribute("href")),

            linkST = ScrollTrigger.create({
                trigger: element, // element = 9개의 메뉴
                start:"top top" 
            });

            ScrollTrigger.create({
               trigger:element,
               start: "top center",
               end: "bottom center",
               onToggle: self => setActive(link), //onToggle을 활용해 setActive() 메서드에 link(9개의 메뉴) 보내줌 - 스크롤 양방향 ani 적용.
            });

            link.addEventListener("click",e=>{ //클릭 이벤트시 작동 
                e.preventDefault();
                gsap.to(window, {
                    duration:1, 
                    scrollTo: element, 
                    overwrite:"auto" 
                    // overwrite (애니메이션 중 여러 번 클릭의 가능성이 있거나, 겹칠 가능성이 있을 때 유용)
                    // auto : 겹치는 같은 속성만 덮어씀 (권장)
                    // true : 같은 속성의 ani 모두 중단 - 충돌, 충돌 가능성 높은 ani만 중단
                    // false : 기존 ani 유지(덮어쓰기X)
                    // all : 요소의 모든 ani 중단 - 완전 초기화
                    // concurrent : 현재 시점의 ani 모두 중단, 과거 코드는 살아있!
                });
            });
        });

        //이 함수를 통해 '.active' 유.무 조절 역할
        function setActive(link){ 
            links.forEach(el=>el.classList.remove("active")); // 모든 링크(links)에 active 제거
            link.classList.add("active"); // 현재 링크(link)에 active 추가
        }
    </script>
</body>
</html>