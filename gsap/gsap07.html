<!DOCTYPE html>
<html lang="ko">
<head>

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GSAP_배경색 효과</title>

<link rel="stylesheet" href="./assets/css/common.css">
<link rel="stylesheet" href="./assets/css/__cont.css">

<!-- Font  -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

<!-- GSAP -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollTrigger.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.13.0/dist/ScrollToPlugin.min.js"></script>

<script src="../src/jquery-1.12.4.min.js"></script>

<!-- gsap07 CSS -->
<style>
    body {
        --bg-color : #222;
        background: var(--bg-color);
    }

    /* title */
    .main_visual {
        position:absolute;
    }
    .main_visual p {
        margin-top:-2px;
    }

    /* parallax__cont */   
    .parallax__item:nth-child(2n){
        background: var(--bg-color);
        background:transparent;
    } 
    .parallax__item__imgWrap {
        width: 50%;
        margin-right: 30%;
        padding-bottom: 26.25%;
        background: #000;
        position: relative;
        overflow: hidden;
    }
    .parallax__item__img {
        position: absolute;
        left: -5%; 
        top: -5%;
        width: 110%;
        height: 110%;
        background-repeat: no-repeat;
        filter: saturate(0%);
        transition: all 1s;
    }
    .parallax__item__img:hover {
        filter: saturate(100%);
        transform: scale(1.025);
    }
    .parallax__item__desc {
        font-size: 3vw;
        line-height: 1.4;
        margin-top: 10vw;
        margin-left: -4vw;
        margin-right: 2vw;
        z-index: 100;
        position: absolute;
        left: 50%;
        top: 50%;
        word-break: keep-all;
    }
</style>
</head>
<body>
    <header class="main_visual">
        <h1>GSAP Parallax Effect</h1>
        <p>GSAP scrollTrigger Effect</p>

        <div class="ul_wrap">
            <ul>
                <li class=""><a href="gsap01.html">01_기본Ani</a></li>
                <li class=""><a href="gsap02.html">02_Pin Ani</a></li>
                <li class=""><a href="gsap03.html">03_Pin 배경 고정</a></li>
            </ul>
            <ul>
                <li class=""><a href="gsap04.html">04_이질감 효과</a></li>
                <li class=""><a href="gsap05.html">05_나타내기 효과</a></li>
                <li class=""><a href="gsap06.html">06_텍스트 효과</a></li>
            </ul>
            <ul>
                <li class="active"><a href="#!">07_배경색 효과</a></li>
                <li class=""><a href="gsap08.html">08_진행바 효과</a></li>
                <li class=""><a href="gsap09.html">09_메뉴 이동 효과</a></li>
            </ul>
            <ul>
                <li class=""><a href="gsap10.html">10_메뉴 축소 효과</a></li>
                <li class=""><a href="gsap11.html">11_메뉴 숨기기 효과</a></li>
                <li class=""><a href="gsap12.html">12_가로 효과</a></li>
            </ul>
            <ul>
                <li class=""><a href="gsap13.html">13_가로/세로 효과</a></li>
                <li class=""><a href="gsap14.html">14_가로/세로 나타나기 효과</a></li>
                <li class=""><a href="gsap15.html">15_스무스 효과</a></li>
            </ul>
        </div>
    </header>

    <main id="parallax__cont">
        <section id="section01" class="parallax__item" data-bgcolor="#111111">
            <span class="parallax__item__num">01</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section1 -->

        <section id="section02" class="parallax__item" data-bgcolor="#593b22">
            <span class="parallax__item__num">02</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum has been the industry's standard dummy text.</p>
        </section>
        <!-- //section2 -->

        <section id="section03" class="parallax__item" data-bgcolor="#245922">
            <span class="parallax__item__num">03</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
        </section>
        <!-- //section3 -->

        <section id="section04" class="parallax__item" data-bgcolor="#243859">
            <span class="parallax__item__num">04</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p>
        </section>
        <!-- //section4 -->

        <section id="section05" class="parallax__item" data-bgcolor="#3f2459">
            <span class="parallax__item__num">05</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">When an unknown printer took a galley of type and scrambled it to make a type specimen book.</p>
        </section>
        <!-- //section5 -->

        <section id="section06" class="parallax__item" data-bgcolor="#59243c">
            <span class="parallax__item__num">06</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum has been the industry's standard dummy text.</p>
        </section>
        <!-- //section6 -->

        <section id="section07" class="parallax__item" data-bgcolor="#3f2459">
            <span class="parallax__item__num">07</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
        </section>
        <!-- //section7 -->

        <section id="section08" class="parallax__item" data-bgcolor="#222222">
            <span class="parallax__item__num">08</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p>
        </section>
        <!-- //section8 -->

        <section id="section09" class="parallax__item" data-bgcolor="#592624">
            <span class="parallax__item__num">09</span>
            <figure class="parallax__item__imgWrap">
                <div class="parallax__item__img"></div>
            </figure>
            <p class="parallax__item__desc">Lorem Ipsum is simply dummy text.</p>
        </section>
        <!-- //section9 -->
    </main>
    
    <script>
        // 01.전체 배경색 제어
        // let bg = gsap.timeline({
        //     scrollTrigger:{
        //         start:0,
        //         end:"max", // 전체 스크롤 길이
        //         scrub:true // 부드러운 ani 작동
        //     }
        // });

        // bg.to("body",{"--bg-color":"red"})
        // .to("body",{"--bg-color":"green"})
        // .to("body",{"--bg-color":"orange"}); // css변수지정과 같이 작성!

        // 02. data값으로 배경색 제어
        gsap.utils.toArray(".parallax__item").forEach((item) => { //.parallax__item의 각 각

            let color = item.getAttribute("data-bgcolor"); 
            // let : 변경 가능 변수
            // .getAttribute() : html에 명시된 값 | 속성과 속성값이 존재 | boolean은 존재 여부만 따짐

            ScrollTrigger.create({
                trigger:item,
                start:"top 50%",
                end:"bottom 5%",
                markers:true,

                onEnter:()=>gsap.to("body",{
                    background:color,
                    duration:1.4
                }), // 스크롤 내릴 때 동작 
                
                onEnterBack:() => gsap.to("body",{
                    background:color,
                    duration:1.4
                }), // 스크롤을 다시 올려도 동일하게 동작!

                // onToggle: (self) => {
                //     if (self.isActive){
                //         gsap.to("body",{
                //             background:color,
                //             duration: 1.4
                //         });
                //     }
                // }, // 위 2개 이벤트를 합친 동작
            });
        });
    </script>
</body>
</html>